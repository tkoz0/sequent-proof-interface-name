(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(30)},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(11),u=n.n(i),o=(n(21),n(7)),l=n(8),c=n(1),s=n(32),f=!1,v=(n(22),function(){return a.a.createElement("div",{className:"footer"},"Intermediate Logic Project by Thomas Kozlowski")}),p=(n(23),function(){return a.a.createElement("div",{className:"header"},"Sequent Proof Interface Name"," (","SPIN",")",!1)}),d=n(9),h=n.n(d),m=n(12),b=(n(26),function(e){var t=e.addSequent,n=e.clearProof,i=(e.editing,e.loadProofFile),u=e.saveProofFile,o=Object(r.useRef)(null);return a.a.createElement("div",{className:"menu"},a.a.createElement("button",{onClick:function(){o.current&&o.current.click()}},"Open"),a.a.createElement("input",{type:"file",style:{display:"none"},accept:".spin,.json",ref:o,multiple:!1,onChange:function(){var e=Object(m.a)(h.a.mark(function e(t){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==(n=t.target.files)&&n.length>0)){e.next=6;break}return e.next=4,new Promise(function(e,t){var r=new FileReader;r.onload=function(){if(!r.result)throw"open: failure";e(r.result.toString())},r.onabort=function(){return t("open: failure")},r.readAsText(n[0])});case 4:r=e.sent;try{i(r)||alert("Proof file was not loaded.")}catch(a){alert("Error loading proof file: "+a)}case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}),a.a.createElement("button",{onClick:function(){var e=prompt("Enter a file name:");if(null!==e){e.endsWith(".spin")||(e+=".spin");var t=u(),n=new Blob([t],{type:"text/json"}),r=document.createElement("a"),a=URL.createObjectURL(n);r.href=a,r.download=e,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(a)})}}},"Save"),a.a.createElement("button",{onClick:function(){confirm("Reset the current proof?")&&n()}},"New Proof"),a.a.createElement("button",{onClick:function(){var e=prompt("Enter ID:");null!==e&&(0===e.length?alert("ID cannot be empty."):e.match(/^[0-9A-Za-z_-]+$/)?t({comment:"",expr:null,expr_text:"",id:e,ref_by:new Set,refs:new Set,rule:""}):alert("ID can only contain letters, numbers, '_' and '-'."))}},"New Sequent"))}),y=(n(27),function(e){var t=e.enabled,n=e.value,r=e.setValue;return a.a.createElement("select",{disabled:!t,value:n,onChange:function(e){return r(e.target.value)}},a.a.createElement("option",{value:""}),a.a.createElement("option",{value:"assume"},"Assume"),a.a.createElement("option",{value:"andE"},"\u2227 Elim"),a.a.createElement("option",{value:"andI"},"\u2227 Intro"),a.a.createElement("option",{value:"orE"},"\u2228 Elim"),a.a.createElement("option",{value:"orI"},"\u2228 Intro"),a.a.createElement("option",{value:"notE"},"\xac Elim"),a.a.createElement("option",{value:"notI"},"\xac Intro"),a.a.createElement("option",{value:"contE"},"\u22a5 Elim"),a.a.createElement("option",{value:"contI"},"\u22a5 Intro"),a.a.createElement("option",{value:"ifE"},"\u2192 Elim"),a.a.createElement("option",{value:"ifI"},"\u2192 Intro"),a.a.createElement("option",{value:"iffE"},"\u2194 Elim"),a.a.createElement("option",{value:"iffI"},"\u2194 Intro"))}),E=(n(28),n(3)),j=n(4),x=/[a-zA-z_][0-9a-zA-z_]*/,O=/[a-zA-z_]/,g=/[ \n\t]*/,w=/[^ \n\t]/,q=function e(t,n,r,a,i){for(var u=0;u<i.length;++u)if(t[n].has(r[u])&&!a[u]&&(a[u]=!0,i[u]<0||e(t,i[u],r,a,i)))return i[u]=n,!0;return!1},k=function(e,t,n){var r=n.get(e);if(void 0===r)throw"getSequent: invalid ID";return[t[r.index],r]},S=function(e,t,n,r){for(var a=0;a<t.length;++a){var i=k(t[a],n,r),u=Object(c.a)(i,2),o=u[0];u[1];if(null===o.expr)throw"indexOfSequent: internal error";if(e.equals(o.expr))return a}return-1},I=function(e,t){for(var n=0;n<t.length;++n)if(e.equals(t[n]))return n;return-1},C=function(e,t){if(e.length!==t.length)return!1;var n=[];return t.forEach(function(){return n.push(!1)}),e.forEach(function(e){for(var r=0;r<t.length;++r)if(!n[r]&&e.equals(t[r])){n[r]=!0;break}}),n.reduce(function(e,t){return e&&t})},R=function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},P=n(6),_=n(5),N=n(2),D=function(){function e(t){Object(E.a)(this,e),this._values=void 0,this._values=t}return Object(j.a)(e,[{key:"values",get:function(){return this._values}}],[{key:"listsEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!e[n].equals(t[n]))return!1;return!0}}]),e}();function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var A=function(e){Object(P.a)(n,e);var t=z(n);function n(e){if(Object(E.a)(this,n),e.length<2)throw"AND must have >= 2 arguments";return t.call(this,e)}return Object(j.a)(n,[{key:"toString",value:function(){return"("+this.values.map(function(e){return e.toString()}).join(" \u2227 ")+")"}},{key:"toSaveString",value:function(){return"(and "+this.values.map(function(e){return e.toSaveString()}).join(" ")+")"}},{key:"equals",value:function(e){return e instanceof n&&D.listsEqual(this.values,e.values)}}]),n}(D);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var L=function(e){Object(P.a)(n,e);var t=B(n);function n(e){var r;if(Object(E.a)(this,n),(r=t.call(this,[]))._label=void 0,!e.match(x))throw"invalid atom";return r._label=e,r}return Object(j.a)(n,[{key:"toString",value:function(){return this.label}},{key:"toSaveString",value:function(){return this.label}},{key:"label",get:function(){return this._label}},{key:"equals",value:function(e){return e instanceof n&&this.label===e.label}}]),n}(D);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var M=function(e){Object(P.a)(n,e);var t=F(n);function n(){return Object(E.a)(this,n),t.call(this,[])}return Object(j.a)(n,[{key:"toString",value:function(){return"\u22a5"}},{key:"toSaveString",value:function(){return"(cont)"}},{key:"equals",value:function(e){return e instanceof n}}]),n}(D);function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var W=function(e){Object(P.a)(n,e);var t=H(n);function n(e,r){return Object(E.a)(this,n),t.call(this,[e,r])}return Object(j.a)(n,[{key:"toString",value:function(){return"("+this.values[0].toString()+" \u2192 "+this.values[1].toString()+")"}},{key:"toSaveString",value:function(){return"(if "+this.values[0].toSaveString()+" "+this.values[1].toSaveString()+")"}},{key:"equals",value:function(e){return e instanceof n&&D.listsEqual(this.values,e.values)}}]),n}(D);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var V=function(e){Object(P.a)(n,e);var t=T(n);function n(e,r){return Object(E.a)(this,n),t.call(this,[e,r])}return Object(j.a)(n,[{key:"toString",value:function(){return"("+this.values[0].toString()+" \u2194 "+this.values[1].toString()+")"}},{key:"toSaveString",value:function(){return"(iff "+this.values[0].toSaveString()+" "+this.values[1].toSaveString()+")"}},{key:"equals",value:function(e){return e instanceof n&&D.listsEqual(this.values,e.values)}}]),n}(D);function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var U=function(e){Object(P.a)(n,e);var t=J(n);function n(e){return Object(E.a)(this,n),t.call(this,[e])}return Object(j.a)(n,[{key:"toString",value:function(){return"\xac"+this.values[0].toString()}},{key:"toSaveString",value:function(){return"(not "+this.values[0].toSaveString()+")"}},{key:"equals",value:function(e){return e instanceof n&&D.listsEqual(this.values,e.values)}}]),n}(D);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var $=function(e){Object(P.a)(n,e);var t=Z(n);function n(e){if(Object(E.a)(this,n),e.length<2)throw"OR must have >= 2 arguments";return t.call(this,e)}return Object(j.a)(n,[{key:"toString",value:function(){return"("+this.values.map(function(e){return e.toString()}).join(" \u2228 ")+")"}},{key:"toSaveString",value:function(){return"(or "+this.values.map(function(e){return e.toSaveString()}).join(" ")+")"}},{key:"equals",value:function(e){return e instanceof n&&D.listsEqual(this.values,e.values)}}]),n}(D),K=function(){function e(){Object(E.a)(this,e)}return Object(j.a)(e,null,[{key:"skipWhitespace",value:function(e){var t=e.match(g);return null!==t&&(e=e.substring(t[0].length)),e}},{key:"parseHelper",value:function(t){var n=t,r=(n=e.skipWhitespace(n)).match(w),a=null;if(null===r)throw"parseHelper: expected token or expression";if("("===r[0]){n=n.substring(1);var i=(n=e.skipWhitespace(n)).match(x);if(null===i)throw"parseHelper: expected connective name";if(n=n.substring(i[0].length),"cont"===i[0].toLowerCase())a=new M;else{var u=null,o=e.parseHelper(n),l=Object(c.a)(o,2);if(u=l[0],n=l[1],"not"===i[0].toLowerCase())a=new U(u);else{var s,f=e.parseHelper(n),v=Object(c.a)(f,2);if(s=v[0],n=v[1],"if"===i[0].toLowerCase())a=new W(u,s);else if("iff"===i[0].toLowerCase())a=new V(u,s);else{for(var p=[u,s];;){try{var d=e.parseHelper(n),h=Object(c.a)(d,2);u=h[0],n=h[1]}catch(b){break}p.push(u)}if("and"===i[0].toLowerCase())a=new A(p);else{if("or"!==i[0].toLowerCase())throw"parseHelper: invalid connective name";a=new $(p)}}}}if(null===(r=(n=e.skipWhitespace(n)).match(w))||")"!==r[0])throw"parseHelper: expected ')'";n=n.substring(1)}else{if(!r[0].match(O))throw"parseHelper: invalid token";var m=n.match(x);if(null===m)throw"parseHelper: null atom error";a=new L(m[0]),n=n.substring(m[0].length)}return[a,n=e.skipWhitespace(n)]}},{key:"parse",value:function(t){var n=e.parseHelper(t),r=Object(c.a)(n,2),a=r[0];if(""!==r[1])throw"parse: extra string data";return a}}]),e}(),G=function(e){var t=e.seqData,n=e.seqCalc,i=e.updateCalc,u=e.removeSequent,l=e.moveSequent,s=e.editing,f=e.editSequent,v=e.finishSequent,p=e.renameSequent,d=Object(r.useState)(t.expr_text),h=Object(c.a)(d,2),m=h[0],b=h[1],E=Object(r.useState)(t.comment),j=Object(c.a)(E,2),x=j[0],O=j[1],g=Object(r.useState)(t.rule),w=Object(c.a)(g,2),q=w[0],k=w[1],S="Sequents may only depend on previous sequents.";return a.a.createElement("tr",{className:"proofsequent"+(s===t.id?" proofediting":n.checked?" seqselected":"")},a.a.createElement("td",{className:"seqmove"},a.a.createElement("button",{disabled:null!==s,onClick:function(){l(t.id,-1)||alert(S)}},"\u2227"),a.a.createElement("button",{disabled:null!==s,onClick:function(){l(t.id,1)||alert(S)}},"\u2228")),a.a.createElement("td",{className:"seqid"},t.id),a.a.createElement("td",{className:"seqref"},"{",s===t.id?"?":function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t.join(",")}(n.assumptions),"}"," \u22a8"),a.a.createElement("td",{className:"seqexpr"},s===t.id?a.a.createElement("textarea",{defaultValue:m,onChange:function(e){b(e.target.value)}}):null!==t.expr?t.expr.toString():""===m?"<none>":"<invalid>"),a.a.createElement("td",{className:"seqsel"},a.a.createElement("input",{type:"checkbox",disabled:!n.canCheck,checked:n.checked,onChange:function(){i(Object(o.a)({},n,{checked:!n.checked}))}})),a.a.createElement("td",{className:"seqrule"},a.a.createElement(y,{enabled:s===t.id,value:q,setValue:function(e){return k(e)}})),a.a.createElement("td",{className:s===t.id?"":!0===n.valid?"seqvalid":!1===n.valid?"seqinvalid":""}),a.a.createElement("td",{className:"seqcomment"},s===t.id?a.a.createElement("textarea",{defaultValue:x,onChange:function(e){O(e.target.value)}}):t.comment),a.a.createElement("td",{className:"seqactions"},a.a.createElement("button",{onClick:function(){if(s===t.id){var e=null;try{e=K.parse(m)}catch(n){""!==m&&alert("Invalid expression: "+n)}v(t.id,Object(o.a)({},t,{comment:x,expr:e,expr_text:m,rule:q}))}else f(t.id)||alert("Please finish editing current sequent.")},className:s===t.id?"donebutton":"editbutton",disabled:null!==s&&s!==t.id},s===t.id?"Done":"Edit"),a.a.createElement("button",{disabled:null!==s,onClick:function(){var e=prompt("Enter new ID:");null!==e&&(0===e.length?alert("ID cannot be empty."):e.match(/^[0-9A-Za-z_-]+$/)?p(t.id,e)||alert("Must use a new ID."):alert("ID can only contain letters, numbers, '_' and '-'."))},className:"renamebutton"},"Rename"),a.a.createElement("button",{disabled:null!==s,onClick:function(){confirm("Delete this sequent?")&&(u(t.id)||alert("Error deleting sequent."))},className:"deletebutton"},"Delete")))},Q=function(e){var t=e.seqData,n=e.seqCalc,r=(e.updateData,e.updateCalc),i=e.removeSequent,u=e.moveSequent,o=e.editing,l=e.editSequent,c=e.finishSequent,s=e.renameSequent;return a.a.createElement("table",{className:"prooflist"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Move"),a.a.createElement("th",null,"ID"),a.a.createElement("th",null,"Assumptions"),a.a.createElement("th",null,"Expression"),a.a.createElement("th",null,"Select"),a.a.createElement("th",null,"Rule"),a.a.createElement("th",null,"Validity"),a.a.createElement("th",null,"Comment"),a.a.createElement("th",null,"Actions")),t.length>0?t.map(function(e){return a.a.createElement(G,{key:n.get(e.id).uuid,seqData:e,seqCalc:n.get(e.id),updateCalc:function(t){return r(e.id,t)},removeSequent:i,moveSequent:u,editing:o,editSequent:l,finishSequent:c,renameSequent:s})}):a.a.createElement("tr",null,a.a.createElement("td",{colSpan:9,className:"nosequents"},"No sequents added yet."))))},X=(n(29),function(){return a.a.createElement("button",{onClick:function(){var e=prompt("enter a string");if(null===e)alert("you did not enter a string");else{var t=null;try{t=K.parse(e)}catch(n){alert("parsing error: "+n)}null!==t&&alert(t.toString()+"\n"+t.toSaveString())}}},"Test Parser")});function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(N.a)(e);if(t){var a=Object(N.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var ee=function(e){Object(P.a)(n,e);var t=Y(n);function n(){return Object(E.a)(this,n),t.call(this,[])}return Object(j.a)(n,[{key:"toString",value:function(){return"*"}},{key:"toSaveString",value:function(){return"(any)"}},{key:"equals",value:function(e){return!0}}]),n}(D),te=function(){function e(){Object(E.a)(this,e)}return Object(j.a)(e,null,[{key:"justifyAssume",value:function(e,t,n,r){e.refs.size>0?t.valid=!1:(t.assumptions.add(e.id),t.valid=!0)}},{key:"justifyNotElim",value:function(t,n,r,a){if(null===t.expr||1!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1];if(null===l.expr)throw"justifyNotElim: internal error";if(e.notElimPattern.equals(l.expr))if(l.expr.values[0].values[0].equals(t.expr))return n.valid=!0,void s.assumptions.forEach(function(e){return n.assumptions.add(e)});n.valid=!1}}},{key:"justifyNotIntro",value:function(t,n,r,a){if(null===t.expr||1!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1];if(null===l.expr)throw"justifyNotIntro: internal error";if(l.expr.equals(e.notIntroCont)&&e.notIntroPattern.equals(t.expr)){var f=R(s.assumptions),v=S(t.expr.values[0],f,r,a);if(-1!==v)return n.valid=!0,void f.forEach(function(e,t){t!==v&&n.assumptions.add(e)})}n.valid=!1}}},{key:"justifyAndElim",value:function(e,t,n,r){if(null===e.expr||1!==e.refs.size)t.valid=!1;else{var a=R(e.refs),i=k(a[0],n,r),u=Object(c.a)(i,2),o=u[0],l=u[1];if(null===o.expr)throw"justifyAndElim: internal error";if(o.expr instanceof A)if(-1!==I(e.expr,o.expr.values))return t.valid=!0,void l.assumptions.forEach(function(e){return t.assumptions.add(e)});t.valid=!1}}},{key:"justifyAndIntro",value:function(e,t,n,r){if(null!==e.expr&&e.refs.size===e.expr.values.length&&e.expr instanceof A){var a=R(e.refs),i=[],u=[];a.forEach(function(e){var t=k(e,n,r),a=Object(c.a)(t,2),o=a[0],l=a[1];i.push(o),u.push(l)});var o=[];if(i.forEach(function(e){if(null===e.expr)throw"justifyAndIntro: internal error";o.push(e.expr)}),C(o,e.expr.values))return t.valid=!0,void u.forEach(function(e){e.assumptions.forEach(function(e){return t.assumptions.add(e)})});t.valid=!1}else t.valid=!1}},{key:"justifyOrElim",value:function(e,t,n,r){if(null===e.expr)t.valid=!1;else{var a=R(e.refs),i=[],u=[],o=[];a.forEach(function(e){var t=k(e,n,r),a=Object(c.a)(t,2),l=a[0],s=a[1];if(i.push(l),u.push(s),null===l.expr)throw"justifyOrElim: internal error";o.push(l.expr)});for(var l=function(a){if(!(o[a]instanceof $))return"continue";if(o[a].values.length+1!==o.length)return"continue";var l=!0;if(o.forEach(function(t,n){if(null===e.expr)throw"justifyOrElim: internal error";n===a||e.expr.equals(t)||(l=!1)}),!l)return"continue";var s=[];i.forEach(function(e,t){t!==a&&s.push(e.id)});var f=function(e,t,n,r){var a=[];e.forEach(function(e){var i=new Set;t.forEach(function(t){var a=k(t,n,r),u=Object(c.a)(a,2),o=(u[0],u[1]);-1!==S(e,R(o.assumptions),n,r)&&i.add(t)}),a.push(i)});var i=[];t.forEach(function(){return i.push(-1)}),e.forEach(function(e,n){var r=[];t.forEach(function(){return r.push(!1)}),q(a,n,t,r,i)});var u=[];return i.forEach(function(n,r){-1!==n&&u.push([e[n],t[r]])}),u}(o[a].values,s,n,r);return f.length<o[a].values.length?"continue":(f.forEach(function(e){var a=Object(c.a)(e,2),i=a[0],u=a[1],o=k(u,n,r),l=Object(c.a)(o,2),s=(l[0],l[1]),f=R(s.assumptions),v=S(i,f,n,r);if(-1===v)throw"justifyOrElim: internal error (index)";f.forEach(function(e,n){n!==v&&t.assumptions.add(e)})}),u[a].assumptions.forEach(function(e){return t.assumptions.add(e)}),t.valid=!0,{v:void 0})},s=0;s<a.length;++s){var f=l(s);if("continue"!==f&&"object"===typeof f)return f.v}t.valid=!1}}},{key:"justifyOrIntro",value:function(e,t,n,r){if(null===e.expr||1!==e.refs.size)t.valid=!1;else{var a=R(e.refs),i=k(a[0],n,r),u=Object(c.a)(i,2),o=u[0],l=u[1];if(null===o.expr)throw"justifyOrIntro: internal error";if(e.expr instanceof $)if(-1!==I(o.expr,e.expr.values))return t.valid=!0,void l.assumptions.forEach(function(e){return t.assumptions.add(e)});t.valid=!1}}},{key:"justifyIfElim",value:function(t,n,r,a){if(null===t.expr||2!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1],f=k(i[1],r,a),v=Object(c.a)(f,2),p=v[0],d=v[1];if(null===l.expr||null===p.expr)throw"justifyIfElim: internal error";if(e.ifElimPattern.equals(l.expr)&&l.expr.values[0].equals(p.expr)&&l.expr.values[1].equals(t.expr)||e.ifElimPattern.equals(p.expr)&&p.expr.values[0].equals(l.expr)&&p.expr.values[1].equals(t.expr))return n.valid=!0,s.assumptions.forEach(function(e){return n.assumptions.add(e)}),void d.assumptions.forEach(function(e){return n.assumptions.add(e)});n.valid=!1}}},{key:"justifyIfIntro",value:function(t,n,r,a){if(null===t.expr||1!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1];if(null===l.expr)throw"justifyIfIntro: internal error";if(e.ifIntroPattern.equals(t.expr)&&t.expr.values[1].equals(l.expr)){var f=R(s.assumptions),v=S(t.expr.values[0],f,r,a);if(-1!==v)return n.valid=!0,void f.forEach(function(e,t){t!==v&&n.assumptions.add(e)})}n.valid=!1}}},{key:"justifyIffElim",value:function(t,n,r,a){if(null===t.expr||2!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1],f=k(i[1],r,a),v=Object(c.a)(f,2),p=v[0],d=v[1];if(null===l.expr||null===p.expr)throw"justifyIffElim: internal error";if(e.iffElimPattern.equals(l.expr)&&C(l.expr.values,[p.expr,t.expr])||e.iffElimPattern.equals(p.expr)&&C(p.expr.values,[l.expr,t.expr]))return n.valid=!0,s.assumptions.forEach(function(e){return n.assumptions.add(e)}),void d.assumptions.forEach(function(e){return n.assumptions.add(e)});n.valid=!1}}},{key:"justifyIffIntro",value:function(t,n,r,a){if(null===t.expr||2!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1],f=k(i[1],r,a),v=Object(c.a)(f,2),p=v[0],d=v[1];if(null===l.expr||null===p.expr)throw"justifyIffIntro: internal error";if(e.iffIntroPattern.equals(t.expr)){var h=R(s.assumptions),m=R(d.assumptions),b=-1,y=-1;if(t.expr.values[0].equals(l.expr)&&t.expr.values[1].equals(p.expr)&&(b=S(t.expr.values[1],h,r,a),y=S(t.expr.values[0],m,r,a)),t.expr.values[0].equals(p.expr)&&t.expr.values[1].equals(l.expr)&&(b=S(t.expr.values[0],h,r,a),y=S(t.expr.values[1],m,r,a)),-1!==b&&-2!==y)return n.valid=!0,h.forEach(function(e,t){t!==b&&n.assumptions.add(e)}),void m.forEach(function(e,t){t!==y&&n.assumptions.add(e)})}n.valid=!1}}},{key:"justifyContElim",value:function(t,n,r,a){if(1!==t.refs.size)n.valid=!1;else{var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1];if(null===l.expr)throw"justifyContElim: internal error";if(e.contElimCont.equals(l.expr))return n.valid=!0,void s.assumptions.forEach(function(e){return n.assumptions.add(e)});n.valid=!1}}},{key:"justifyContIntro",value:function(t,n,r,a){if(null!==t.expr&&2===t.refs.size&&t.expr.equals(e.contIntroCont)){var i=R(t.refs),u=k(i[0],r,a),o=Object(c.a)(u,2),l=o[0],s=o[1],f=k(i[1],r,a),v=Object(c.a)(f,2),p=v[0],d=v[1];if(null===l.expr||null===p.expr)throw"justifyContIntro: internal error";if(l.expr.equals(new U(p.expr))||p.expr.equals(new U(l.expr)))return n.valid=!0,s.assumptions.forEach(function(e){return n.assumptions.add(e)}),void d.assumptions.forEach(function(e){return n.assumptions.add(e)});n.valid=!1}else n.valid=!1}},{key:"justify",value:function(t,n,r){var a=r.get(t);if(void 0===a)throw"justify: nonexistent ID";var i=n[a.index],u=[],o=[],l=!1;i.refs.forEach(function(e){var t=r.get(e);if(void 0===t)throw"justify: nonexistent ID";u.push(n[t.index]),o.push(t.assumptions),t.valid||(l=!0)});var c=i.expr;if(a.assumptions=new Set,null===c||l)a.valid=!1;else switch(i.rule){case"":a.valid=!1;break;case"assume":e.justifyAssume(i,a,n,r);break;case"notE":e.justifyNotElim(i,a,n,r);break;case"notI":e.justifyNotIntro(i,a,n,r);break;case"andE":e.justifyAndElim(i,a,n,r);break;case"andI":e.justifyAndIntro(i,a,n,r);break;case"orE":e.justifyOrElim(i,a,n,r);break;case"orI":e.justifyOrIntro(i,a,n,r);break;case"ifE":e.justifyIfElim(i,a,n,r);break;case"ifI":e.justifyIfIntro(i,a,n,r);break;case"iffE":e.justifyIffElim(i,a,n,r);break;case"iffI":e.justifyIffIntro(i,a,n,r);break;case"contE":e.justifyContElim(i,a,n,r);break;case"contI":e.justifyContIntro(i,a,n,r);break;default:throw"justify: invalid rule"}}},{key:"justify_all",value:function(t,n){var r=[];t.forEach(function(e){return r.push(e.id)}),r.forEach(function(r){return e.justify(r,t,n)})}},{key:"justify_reachable",value:function(t,n,r){for(var a=[t],i=0;i<a.length;){e.justify(a[i],n,r);var u=r.get(a[i]);if(void 0===u)throw"justify_reachable: nonexistent sequent ID";n[u.index].ref_by.forEach(function(e){return a.push(e)}),++i}}}]),e}();te.notElimPattern=new U(new U(new ee)),te.notIntroCont=new M,te.notIntroPattern=new U(new ee),te.ifElimPattern=new W(new ee,new ee),te.ifIntroPattern=new W(new ee,new ee),te.iffElimPattern=new V(new ee,new ee),te.iffIntroPattern=new V(new ee,new ee),te.contElimCont=new M,te.contIntroCont=new M;var ne=te;var re=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],u=Object(r.useState)(new Map),d=Object(c.a)(u,2),h=d[0],m=d[1],y=Object(r.useState)(null),E=Object(c.a)(y,2),j=E[0],x=E[1],O=function(e){e.preventDefault(),e.returnValue=""},g=Object(r.useRef)(O);Object(r.useEffect)(function(){g.current=O},[O]),Object(r.useEffect)(function(){return window.addEventListener("beforeunload",O),function(){return window.removeEventListener("beforeunload",O)}},[]);var w=function(){i([]),m(new Map),x(null)},q=function(e,t){if(j!==e)return!1;var r=k(e,n,h),a=Object(c.a)(r,2),u=(a[0],a[1]),s=new Map,f=new Set;h.forEach(function(e,t){e.checked&&f.add(t),s.set(t,Object(o.a)({},e,{canCheck:!1,checked:!1}))});var v=[].concat(Object(l.a)(n.slice(0,u.index)),[Object(o.a)({},t,{refs:f})],Object(l.a)(n.slice(u.index+1)));return v.forEach(function(t){f.has(t.id)?t.ref_by.add(e):t.ref_by.delete(e)}),ne.justify_reachable(e,v,s),i(v),m(s),x(null),!0},S=function(e,t){var n=new Map;h.forEach(function(e,t){return n.set(t,e)}),n.set(e,t),m(n)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(p,null),a.a.createElement(b,{addSequent:function(e){return h.has(e.id)?(alert("Sequent with this ID already exists."),!1):(S(e.id,{assumptions:new Set,canCheck:!1,checked:!1,index:n.length,valid:!1,uuid:Object(s.a)()}),i([].concat(Object(l.a)(n),[e])),!0)},clearProof:w,loadProofFile:function(e){var t=JSON.parse(e),n=t.program,r=t.filetype,a=t.version;"spin"!==n&&alert("Warning: program name data is incorrect"),"sequent-propositional"!==r&&alert("Warning: filetype data is not supported"),1!==a&&alert("Warning: file version is not supported");var u=t.proof.sequents,o=[],l=new Map;return u.forEach(function(e){var t=e.id;if(l.has(t))throw"loadProofFile: duplicate sequent ID found";var n=e.expr,r=null;try{""!==n&&(r=K.parse(n))}catch(f){throw"loadProofFile: error parsing a sequent"}var a=e.expr_text,i=e.rule,u=e.refs,c={comment:e.comment,expr:r,expr_text:a,id:t,ref_by:new Set,refs:new Set,rule:i};u.forEach(function(e){var t=e;if(!l.has(t))throw"loadProofFile: sequent has invalid reference";c.refs.add(t)}),l.set(t,{assumptions:new Set,canCheck:!1,checked:!1,index:o.length,valid:!1,uuid:Object(s.a)()}),o.push(c)}),o.forEach(function(e){e.refs.forEach(function(t){var n=k(t,o,l),r=Object(c.a)(n,2),a=r[0];r[1],a.ref_by.add(e.id)})}),ne.justify_all(o,l),w(),m(l),i(o),!0},saveProofFile:function(){var e={program:"spin",filetype:"sequent-propositional",version:1,proof:{sequents:new Array}};return n.forEach(function(t){e.proof.sequents.push({id:t.id,expr:null===t.expr?"":t.expr.toSaveString(),expr_text:t.expr_text,rule:t.rule,refs:R(t.refs),comment:t.comment})}),JSON.stringify(e)},editing:j}),a.a.createElement(Q,{seqData:n,seqCalc:h,updateData:function(e,t){var r=Object(l.a)(n),a=k(e,n,h),u=Object(c.a)(a,2);u[0],r[u[1].index]=t,i(r)},updateCalc:S,removeSequent:function(e){var t=h.get(e);if(void 0===t)return!1;j===e&&q(e,n[t.index]);var r=n[t.index].ref_by,a=[].concat(Object(l.a)(n.slice(0,t.index)),Object(l.a)(n.slice(t.index+1))),u=new Map;return h.forEach(function(e,t){return u.set(t,e)}),u.delete(e),a.forEach(function(t,n){var r=u.get(t.id);if(void 0===r)throw"removeSequent: internal error";u.set(t.id,Object(o.a)({},r,{index:n})),t.refs.delete(e),t.ref_by.delete(e)}),r.forEach(function(e){return ne.justify_reachable(e,a,u)}),i(a),m(u),!0},moveSequent:function(e,t){var r=h.get(e);if(void 0===r)return!0;var a=r.index-(1===t?0:1);if(-1===a||a===n.length-1)return!0;if(n[a+1].refs.has(n[a].id))return!1;var u=new Map;h.forEach(function(e,t){e.index===a?u.set(t,Object(o.a)({},e,{index:a+1})):e.index===a+1?u.set(t,Object(o.a)({},e,{index:a})):u.set(t,e)});var c=[].concat(Object(l.a)(n.slice(0,a)),[n[a+1],n[a]],Object(l.a)(n.slice(a+2)));return i(c),m(u),!0},editing:j,editSequent:function(e){if(null!==j)return!1;var t=k(e,n,h),r=Object(c.a)(t,2),a=r[0],i=r[1],u=new Map;return h.forEach(function(e,t){u.set(t,Object(o.a)({},e,{canCheck:e.index<i.index,checked:a.refs.has(t)}))}),m(u),x(e),!0},finishSequent:q,renameSequent:function(e,t){if(null!==j||h.has(t)||!h.has(e))return!1;var r=k(e,n,h),a=Object(c.a)(r,2),u=(a[0],a[1]),o=Object(l.a)(n),s=new Map;return h.forEach(function(e,t){return s.set(t,e)}),s.set(t,u),s.delete(e),s.forEach(function(n){n.assumptions.has(e)&&(n.assumptions.delete(e),n.assumptions.add(t))}),o.forEach(function(n){n.id===e&&(n.id=t),n.ref_by.has(e)&&(n.ref_by.delete(e),n.ref_by.add(t)),n.refs.has(e)&&(n.refs.delete(e),n.refs.add(t))}),i(o),m(s),!0}}),a.a.createElement(v,null),f&&a.a.createElement(X,null))},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then(function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),i(e),u(e)})};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(re,null)),document.getElementById("root")),ae()}],[[13,1,2]]]);
//# sourceMappingURL=main.89ed2ca4.chunk.js.map